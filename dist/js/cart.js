"use strict";$(document).ready(function(){function t(n,e){$.ajax({type:"post",url:"http://10.31.157.77/800/php/data.php",dataType:"json"}).done(function(i){$.each(i,function(i,o){if(n==o.sid){var t=$(".goods-list:hidden").clone(!0,!0);console.log(o.title),t.find(".goods-title").find("img").attr("src",o.url),t.find(".goods-title").find("img").attr("sid",o.sid),t.find(".goods-title").find("b").html(o.title),t.find(".goods-price div").html(o.newprice),t.find(".goods-quantity").find("input").val(e),t.find(".goods-zprice").find("div").html((o.newprice*e).toFixed(2)),t.appendTo($(".goods-table").find("tbody")).show()}}),getcookie("cookiesid")&&getcookie("cookienum")?$(".k-box").hide():$(".k-box").show(),o(),function(i){$(".all-check").on("change",function(){i.prop("checked",$(this).prop("checked")),$(".all-check").prop("checked",$(this).prop("checked")),o()}),$(i).on("change",function(){$(".goods-list:visible").find("input:checkbox").length==$(".goods-list:visible").find("input:checked").size()?$(".all-check").prop("checked",!0):$(".all-check").prop("checked",!1),o()})}($(".goods-list:visible").find(":checkbox")),$(".quantity-add").on("click",function(){var i=$(this).parents(".goods-quantity").find("input").val();99<=++i&&(i=99),$(this).parents(".goods-quantity").find("input").val(i),$(this).parents(".goods-list").find(".goods-zprice").find("div").html(s($(this))),o(),l($(this))}),$(".quantity-minus").on("click",function(){var i=$(this).parents(".goods-list").find(".goods-quantity input").val();--i<=1&&(i=1),$(this).parents(".goods-list").find(".goods-quantity input").val(i),$(this).parents(".goods-list").find(".goods-zprice").find("div").html(s($(this))),o(),l($(this))}),$(".goods-quantity input").on("input",function(){var i=parseInt($(this).val());/^\d+$/g.test(i)?99<=i?$(this).val(99):i<=0?$(this).val(1):$(this).val(i):$(this).val(1),$(this).parents(".goods-list").find(".goods-zprice").find("div").html(s($(this))),o(),l($(this))}),function(){function i(t,i){var n=-1;$.each(i,function(i,o){t==o&&(n=i)}),i.splice(n,1),c.splice(n,1),addcookie("cookiesid",i.toString(),7),addcookie("cookienum",c.toString(),7)}$(".goods-remove").on("click","a",function(){a(),confirm("你确定要删除吗？")&&$(this).first().parents(".goods-list").remove(),i($(this).first().parents(".goods-list").find(".goods-title img").attr("sid"),d),o()}),$(".allck a").on("click",function(){a(),confirm("你确定要全部删除吗？")&&($(".goods-list:visible").each(function(){$(this).find("input:checkbox").is(":checked")&&($(this).remove(),i($(this).find("img").attr("sid"),d))}),o())})}()})}if($(".header").load("../dist/header.html"),$(".main").load("../dist/cart-main.html"),$(".footer").load("../dist/footer.html"),getcookie("cookiesid")&&getcookie("cookienum")){var n=getcookie("cookiesid").split(","),e=getcookie("cookienum").split(",");$.each(n,function(i,o){t(n[i],e[i])})}function o(){var t=0,n=0;$(".goods-list:visible").each(function(i,o){$(o).find(".cart-checkbox input").prop("checked")&&(t+=parseInt($(o).find(".goods-quantity").find("input").val()),n+=parseFloat($(o).find(".goods-zprice").find("div").html()))}),$(".table-foot").find("span").html(t),$(".table-foot").find("b").html(n.toFixed(2))}function s(i){return(parseFloat(i.parents(".goods-list").find(".goods-price").find("div").html())*parseInt(i.parents(".goods-list").find(".goods-quantity input").val())).toFixed(2)}var d=[],c=[];function a(){getcookie("cookiesid")&&getcookie("cookienum")&&(d=getcookie("cookiesid").split(","),c=getcookie("cookienum").split(","))}function l(i){a();var o=i.parents(".goods-list").find(".goods-title").find("img").css("sid");c[$.inArray(o,d)]=i.parents(".goods-list").find(".goods-quantity input").val(),addcookie("cookienum",c.toString(),7)}});